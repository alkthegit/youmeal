# Начальный каркас верстки со сборщиком Vite

## Особенности

Содержит следующие предустановки:

- sass-embedded
- Шаблонизатор handlebars:
  - установлен плагин vite-plugin-handlebars
  - создана папка ./src/templates
- autoprefixer
- корневая папка в настройках Vite: './', что позволяет выгружать сборку на домены не первого уровня
- browserlist с конфигурацией:

```browserslist
last 2 versions,
not dead
```

## Дальнейшие рекомендуемые действия

### Подключение присоединенного дерева git для продуктовой сброки

Для использования возможностей GitHub pages можно настроить сорку в GitHub pages. Для этого нужно присоединить к проекту новое git-дерево, которое указывает на специальную ветку, например, gh-pages, икоторое связано с папкой сборки (в которю сборщик собирает файлы), например, ./dist

#### Присоединение дерева

Предполагается, что уже есть настроенный remote репозиторий (чтобы выполнилась команда git push, хотя этот шаг можно и пропустить)

```bash
# на ветке main / master
git switch --orphan gh-pages
# для создания первого коммита, нужно что что-то было в индексе (потом этот файл будет связан с папкой сборки и впоследствии удален сборщиком)
echo start > start
git add ./start && git commit -m "start"
# отправляем ветку на remote
git push -u origin gh-pages
# возвращаемся на master / main
git switch master
# после нижеследующей команды файл start должен оказаться в папке dist, с которой теперь связано новой дерево
# для начала папка dist должна отсутствовать (команда зависит от платформы)
rm -rf ./dist
git worktree add ./dist gh-pages
```

После этого ветка gh-pages будет связана с присоединенным деревом в каталоге ./dist

### Npm-скрипты

Для автоматизации npm-скриптов над присоединенным деревом, в них нужно при работе с дистрибутивом указывать параметр -C ./dist, чтобы git выполнялся в контексте ./dist

#### Пример npm-скрипта

Сборка и выгрузка проекта в GitHub pages может выполняться в любой время, так как работа с присоединенным деревом не затрагивает индекс основного рабочего каталога.

Пример скрипта в `package.json` (папка gh-pages должна быть создана ранее в origin):

```JSON
{
  "deploy": "npm run build && git -C ./dist add . && git -C dist commit -m \"build\" && git -C ./dist push"
}
```

#### Сборка GitHub pages

Далее как обычно настроить сборку сайта в GitHub pages, указав там ветку gh-pages
